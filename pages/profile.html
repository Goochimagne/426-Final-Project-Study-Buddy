<!DOCTYPE html>

<html>
	<head>

		<!-- Bootstrap -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">

		<!-- Mine -->
		<link rel="stylesheet" href="../style/profile.css">

		<!-- JQuery -->

		<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>

		<!-- Popper -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>

		<!-- JS -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>


		<title></title>
	</head>

	<body>
		<script src="../js/profile.js" ></script>
		<script type="text/javascript">
			function addClass(e){
				var course = $("#course-dropdown option:selected").text().split(":")[0];
				var add = new XMLHttpRequest();
				  add.open("POST", "../php/profile.php", true);
				  add.setRequestHeader("Content-type","application/x-www-form-urlencoded");
				  var params = "add=" + course;
				  add.send(params);
				  add.onload = function() {
						var close_button = $("<div class='x' onclick='removeClass(event)'><span class='glyphicon glyphicon-remove'></span><span class='glyphicon glyphicon-remove-sign'></span></div>");
						var course_div = $("<div class='course' id='" + course + "'>" + course + "</div>");
						if (Math.random() < .25) {
							course_div.css("background-color", "#00e676");
						} else if (Math.random() >= .25 && Math.random() < .5) {
							course_div.css("background-color", "#ff1744");
						} else if (Math.random() >= .50 && Math.random() < .75) {
							course_div.css("background-color", "#40c4ff");
						} else if (Math.random() >= .75 && Math.random() < 1) {
							course_div.css("background-color", "#ffeb3b");
						} else {
							course_div.css("background-color", "#9c27b0");
						}
						course_div.css("color", "#e0e0e0");
						course_div.append(close_button);
						$("#classes").append(course_div);
					}
			}
			function removeClass(e){
				var course = $(e.path[0]).parent().attr('id');
				$(e.path[0]).parent().remove();
				var xhr = new XMLHttpRequest();
				  xhr.open("POST", "../php/profile.php", true);
				  xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
				  var params = "delete=" + course;
				  xhr.send(params);
			}
		</script>

		<nav class="navbar mr-auto navbar-dark bg-primary">
			<li class="navbar-brand nav-item">
				Study Buddy
			</li>
		    <ul class="navbar-nav">
		      <li class="nav-item">
		        <a class="nav-link" href="./map.html"> Map </a>
		      </li>
		    </ul>
		</nav>
		<div id="profile-info">
			<div id="avatar-wrap">
				<img id="avatar" src="../resources/avatar.png" alt="avatar.png" />
			</div>
			<div id="info-div">
			</div>
		</div>
		<div id="form-clm">
			<div id="btn-wrap">
				<button id="add-button" type="button" class="btn btn-primary"><span class="glyphicon glyphicon-plus-sign"></span></button>
			</div>
			<div id="class-add-wrapper">
			  <div class="form-group">
					 <select name="add" class="form-control" id="course-dropdown">
						 <option> Choose a Course.. </option>
					 </select>
			  </div>
			  <button class="btn btn-primary" id="submit-btn" onclick="addClass(event)"><span class="glyphicon glyphicon-plus-sign"></span></button>
			</div>
		</div>
		<div id="classes">

		</div>
	</body>

<html>
